<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">

<!--
Copyright 2007, Google Inc.

Redistribution and use in source and binary forms, with or without 
modification, are permitted provided that the following conditions are met:

 1. Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
 2. Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation
    and/or other materials provided with the distribution.
 3. Neither the name of Google Inc. nor the names of its contributors may be
    used to endorse or promote products derived from this software without
    specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF 
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO
EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, 
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR 
OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF 
ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->

<html><head><title>Google Gears API Developer's Guide - HttpRequest API</title>


<!-- Begin Templates -->
<link rel="stylesheet" type="text/css" href="http://code.google.com/css/dev_docs.css" />
<link rel="stylesheet" type="text/css" href="./local_extensions.css" />
<!--[if IE 7]><link rel="stylesheet" type="text/css" href="http://code.google.com/css/ie7only.css" /><![endif]-->
<!--[if lte IE 6]><link rel="stylesheet" type="text/css" href="http://code.google.com/css/ie6only.css" /><![endif]-->
<!--[if IE]><link rel="stylesheet" type="text/css" href="http://code.google.com/css/ieonly.css" />  <![endif]-->
<!-- End Templates -->
<style type="text/css">
<!--
.style1 {font-size: medium}
-->
</style>
</head><body id="api_httprequest_page">
<a name="top"></a>
<!-- ########## PAGE HEADER ########## -->
<div id="header">

<div id="logo">
<a href="http://code.google.com/"><img src="resources/code_sm.png"  alt="Google Code" width="150" height="55" border="0" /></a></div>

<h1 id="doc_title">Google Gears API Developer's Guide (Beta)</h1>

<ul class="trail"><li><a href="http://code.google.com/">Google Code Home</a>&nbsp;&gt;</li>
	  <li><a href="api_summary.html">Gears API Reference</a>&nbsp;&gt;</li>
      <li>HttpRequest Module</li>
</ul>
</div>
<!-- ########## END PAGE HEADER ########## -->

<div id="wrapper">
<!-- ########## SIDE NAVIGATION ########## -->

<div id="sidenav">
  <script src="nav.js"></script>
</div>
<!-- ########## END SIDE NAVIGATION ########## -->



<!-- ########## PAGE CONTENT ########## -->
<div id="pagecontent">


<!-- ########## Class Overview ########## -->

<h1 id="page_title">HttpRequest Module API <span class="highlight">[New in <a href="index.html#relnotes">0.2</a>]</span></h1>

<p>The HttpRequest module implements a subset of the
   <a href="http://www.w3.org/TR/XMLHttpRequest/">W3C XmlHttpRequest spec</a>, 
   and makes it available in both workers and the main HTML page.</p>

<h3>Contents</h3>
<ol class="toc">
  <li><a href="#overview">Overview</a></li>
  <li><a href="#example">Example</a></li>
  <li><a href="#HttpRequest">HttpRequest class</a></li>
</ol>

<a name="overview"></a><h2>Overview</h2>
  <p>Since the browser's XmlHttpRequest object is not available in the context of
     a worker, Gears provides its own HttpRequest object to fill that need. Gears HttpRequest
     provides most of the features of XmlHttpRequest except for the ability to access the response
     as an XML DOM object and the ability to send a request synchronously.
  </p>

<a name="example"></a><h2>Example</h2>

<p>To send an HttpRequest request, use the Gears as follows:</p>
<pre><code>&lt;script type="text/javascript" src="<a href='tools.html#gears_init'>gears_init.js</a>"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
var request = google.gears.factory.create('beta.httprequest', '1.0');
request.open('GET', '/index.html');
request.onreadystatechange = function() {
  if (request.readyState == 4) {
    console.write(request.resposeText);
  }
};
request.send();
&lt;/script&gt;</code></pre>

<!-- ########## Class Reference ########## -->

<br>
<a name="HttpRequest"></a>
<h2>HttpRequest class</h2>

<pre><code>void     <b>open</b>(method, url)
void     <b>setRequestHeader</b>(name, value)
void     <b>send</b>([postData])
void     <b>abort</b>()
string   <b>getResponseHeader</b>(name)
string   <b>getAllResponseHeaders</b>()
callback <b>onreadystatechange</b>
readonly attribute int <b>readyState</b>
readonly attribute string <b>responseText</b>
readonly attribute int    <b>status</b>
readonly attribute string <b>statusText</b> </code></pre>

<!-- ########## Methods ########## -->
<h3>Methods</h3>
<table>
  <tr class="odd">
    <th colspan="2"><div align="left"><span class="code">abort()</span></div></th>
    </tr>
  <tr class="odd">
    <td width="113">Return value: </td>
    <td width="489" class="code">void</td>
    </tr>
  <tr class="odd">
    <td>Description:</td>
    <td class="odd">
        Cancels the request.
    </td>
  </tr>
</table>
<table>
  <tr class="odd">
    <th colspan="2"><div align="left"><span class="code">getAllResponseHeaders()</span></div></th>
    </tr>
  <tr class="odd">
    <td width="113">Return value: </td>
    <td width="489" class="code">string</td>
    </tr>
  <tr class="odd">
    <td>Description:</td>
    <td class="odd">
        Returns a string containing the entire set of HTTP headers in the server response.
    </td>
  </tr>
</table>
<table>
  <tr class="odd">
    <th colspan="2"><div align="left"><span class="code">getResponseHeader(headerName)</span></div></th>
    </tr>
  <tr class="odd">
    <td width="113">Return value: </td>
    <td width="489" class="code">string</td>
    </tr>
  <tr class="odd">
    <td>Description:</td>
    <td class="odd">
        Returns the value of a specific HTTP header in the server response.
    </td>
  </tr>
</table>
<table>
  <tr class="odd">
    <th colspan="2"><div align="left"><span class="code">open(method, url)</span></div></th>
    </tr>
  <tr class="odd">
    <td width="113">Return value: </td>
    <td width="489" class="code">void</td>
    </tr>
  <tr class="odd">
    <td>Parameters:</td>
    <td class="odd">
        <span class="code">method</span><br/>
        <span class="code">url</span>
    </td>
  </tr>
  <tr class="odd">
    <td>Description:</td>
    <td class="odd">
        Specifies the method and URL of a request.
        <p>The method parameter can have a value of "GET", "POST", "HEAD" or another HTTP method listed in the W3C specification.</p>
        <p>The URL parameter may be either a relative or complete URL and must be from the same origin as the current context.</p>
    </td>
  </tr>
</table>
<table>
  <tr class="odd">
    <th colspan="2"><div align="left"><span class="code">send([postData])</span></div></th>
    </tr>
  <tr class="odd">
    <td width="113">Return value: </td>
    <td width="489" class="code">void</td>
    </tr>
  <tr class="odd">
    <td>Parameters:</td>
    <td class="odd">
        <span class="code">postData</span> - an optional string to be sent as the body of a POST or PUT request.<br/>
    </td>
  </tr>
  <tr class="odd">
    <td>Description:</td>
    <td class="odd">
        Sends the request.
    </td>
  </tr>
</table>
<table>
  <tr class="odd">
    <th colspan="2"><div align="left"><span class="code">setRequestHeader(name, value)</span></div></th>
    </tr>
  <tr class="odd">
    <td width="113">Return value: </td>
    <td width="489" class="code">void</td>
    </tr>
  <tr class="odd">
    <td>Parameters:</td>
    <td class="odd">
        <span class="code">name</span> - the HTTP header to set<br/>
        <span class="code">value</span> - the value of the header<br/>
    </td>
  </tr>
  <tr class="odd">
    <td>Description:</td>
    <td class="odd">
        Adds the header to the set of HTTP headers to be sent.
    </td>
  </tr>
</table>

<!-- ########## Events ########## -->
<h3>Event Handler</h3>
<table>
  <tr class="odd">
    <th colspan="2"><div align="left"><span class="code">callback onreadystatechange()</span></div></th>
    </tr>
  <tr class="odd">
    <td width="113">Description: </td>
    <td width="489">An event handler that fires at every state change.</td>
    </tr>
</table>

<!-- ########## Attributes ########## -->
<h3>Attributes</h3>
  <table>
    <tr class="odd">
      <th width="158">Attribute</th>
      <th >Type</th>
      <th >Description</th>
    </tr>
    <tr class="odd">
      <td width="158"><strong>readyState</strong></td>
        <td width="109" >readonly int</td>
        <td width="432" > Returns the state of the object:
	        <table class="noborders">
	          <tr>
	            <td><strong>0</strong></td>
	            <td>Uninitialized</td>
            </tr>
            <tr>
              <td><strong>1</strong></td>
              <td>Open</td>
            </tr>
            <tr>
              <td><strong>2</strong></td>
              <td>Sent</td>
            </tr>
            <tr>
              <td><strong>3</strong></td>
              <td>Interactive</td>
            </tr>
            <tr>
              <td><strong>4</strong></td>
              <td>Complete</td>
          </table>
        </td>
    </tr>
    <tr class="odd">
      <td><strong>responseText</strong></td>
        <td class="" >readonly string </td>
        <td class="" >Returns the response as a string.</td>
    </tr>
    <tr class="odd">
      <td><strong>status</strong></td>
        <td class="odd">readonly int</td>
        <td class="odd">Returns the status as a number (e.g. 404 for "Not Found" or 200 for "OK")</td>
    </tr>
    <tr class="odd">
      <td><strong>statusText</strong></td>
        <td class="odd">readonly string </td>
        <td class="odd">Returns the status as a string (e.g. "Not Found" or "OK")</td>
    </tr>
  </table>

</div>
<!-- ########## END PAGE CONTENT ########## -->
</div><!-- end wrapper -->
<!-- ########## PAGE FOOTER ########## -->
<div id="footer">

<div id="footerlogo">
<img src="resources/art.gif" alt="Google color balls" />
</div>

<div>
    <p id="copyright">&copy;2007 Google -
	<a href="http://gears.google.com/tos.html">Terms of Service</a>
	</p>
  </div>

</div><!--end footer -->
<!-- ########## END PAGE FOOTER ########## -->


<!-- ########## ANALYTICS ########## -->
<script src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script>
<script type="text/javascript">
  _uacct = "UA-18071-1";
  _uanchor=1;
  urchinTracker();
</script>
<!-- ########## END ANALYTICS ########## -->
</body></html>
